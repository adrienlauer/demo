name: ekara-demo-al
qualifier: dev

ekara:

orchestrator:
  component: ek-swarm

providers:
  aws:
    component: ek-aws
    #params:
    #  region: {{ .aws.region }}
    #  instance_type: "t2.micro"
    #  ami_id: "ami-f90a4880"
    #  vpc_id: "vpc-880aeaef"
    #env:
    #  AWS_REGION: {{ .aws.region }}
    #  AWS_ACCESS_KEY_ID: {{ .aws.accessKey.id }}
    #  AWS_SECRET_ACCESS_KEY: {{ .aws.accessKey.secret }}
      
nodes:
  managers:
    instances: 3
    provider:
      name: aws
      params:
        security_groups:
          - name: group1
            rules:
              - proto: tcp
                ports:
                  - 22
                cidr_ip: 0.0.0.0/0
                rule_desc: allow all on port 22
          - name: group2
            rules:
              - proto: tcp
                ports:
                  - 80
                cidr_ip: 0.0.0.0/0
                rule_desc: allow all on port 80
              - proto: tcp
                ports:
                  - 8080
                cidr_ip: 0.0.0.0/0
                rule_desc: allow all on port 8080
              - proto: tcp
                ports:
                  - 8090 #ekara api
                cidr_ip: 0.0.0.0/0
                rule_desc: allow all on port 8090
              - proto: tcp
                ports:
                  - 8500 #ekara consul
                cidr_ip: 0.0.0.0/0
                rule_desc: allow all on port 8500
          - name: swarm
            rules:
              - proto: tcp
                ports:
                  - 2377
                cidr_ip: 0.0.0.0/0
                rule_desc: cluster management communications
              - proto: tcp
                ports:
                  - 7946
                cidr_ip: 0.0.0.0/0
                rule_desc: communication among nodes
              - proto: udp
                ports:
                  - 7946
                cidr_ip: 0.0.0.0/0
                rule_desc: communication among nodes
              - proto: udp
                ports:
                  - 4789
                cidr_ip: 0.0.0.0/0
                rule_desc: overlay network traffic
